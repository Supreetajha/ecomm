{"ast":null,"code":"import{useEffect}from'react';import Table from'react-bootstrap/Table';import Button from'react-bootstrap/Button';import Row from'react-bootstrap/Row';import Col from'react-bootstrap/Col';import{LinkContainer}from'react-router-bootstrap';import{useDispatch,useSelector}from'react-redux';//My components\nimport Loader from'../Components/Loader';import Message from'../Components/Message';import{listProducts,deleteProduct,createProduct}from'../Actions/productActions';import{PRODUCT_DELETE_RESET,PRODUCT_CREATE_RESET}from'../Constants/productConstants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ProductListscreen(_ref){var history=_ref.history;console.log(\"ProductList\");var dispatch=useDispatch();var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;var productList=useSelector(function(state){return state.productList;});var loading=productList.loading,error=productList.error,products=productList.products;var productDelete=useSelector(function(state){return state.productDelete;});var successDelete=productDelete.success,loadingDelete=productDelete.loading,errorDelete=productDelete.error;var productCreate=useSelector(function(state){return state.productCreate;});var successCreate=productCreate.success,loadingCreate=productCreate.loading,errorCreate=productCreate.error,newProduct=productCreate.product;console.log(\"successCreate\"+successCreate);useEffect(function(){dispatch({type:PRODUCT_CREATE_RESET});if(!userInfo.isAdmin){history.push('/login');}if(successCreate){history.push(\"/admin/product/\".concat(newProduct._id,\"/edit\"));}else{dispatch(listProducts());}},[dispatch,history,userInfo,successDelete,successCreate,newProduct]);function deleteHandler(id,name){if(window.confirm(\"Delete product : \".concat(name,\"?\"))){dispatch(deleteProduct(id));}}function handleCreateProduct(){dispatch(createProduct());}return loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Row,{className:\"justify-content-center\",children:[/*#__PURE__*/_jsx(Col,{md:10,children:/*#__PURE__*/_jsx(\"h1\",{children:\"Products\"})}),/*#__PURE__*/_jsx(Col,{className:\"mr-0\",md:2,children:/*#__PURE__*/_jsxs(Button,{className:\"my-3\",variant:\"primary\",onClick:handleCreateProduct,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus\"}),\" Create Product\"]})})]}),/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,responsive:true,size:\"sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"NAME\"}),/*#__PURE__*/_jsx(\"th\",{children:\"PRICE\"}),/*#__PURE__*/_jsx(\"th\",{children:\"CATEGORY\"}),/*#__PURE__*/_jsx(\"th\",{children:\"BRAND\"}),/*#__PURE__*/_jsx(\"th\",{children:\"EDIT/DELETE\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:products.map(function(product){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:product._id}),/*#__PURE__*/_jsx(\"td\",{children:product.name}),/*#__PURE__*/_jsxs(\"td\",{children:[\"\\u20B9\",product.price]}),/*#__PURE__*/_jsx(\"td\",{children:product.category}),/*#__PURE__*/_jsx(\"td\",{children:product.brand}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(LinkContainer,{to:\"/admin/product/\".concat(product._id,\"/edit\"),children:/*#__PURE__*/_jsx(Button,{variant:\"light\",className:\"btn-sm\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit\"})})}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",className:\"btn-sm\",onClick:function onClick(){return deleteHandler(product._id,product.name);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})]})]},product._id);})})]})]});}export default ProductListscreen;","map":{"version":3,"sources":["C:/Users/karth/Dev/ecommerce/frontend/ecomm/src/Screens/ProductListscreen.js"],"names":["useEffect","Table","Button","Row","Col","LinkContainer","useDispatch","useSelector","Loader","Message","listProducts","deleteProduct","createProduct","PRODUCT_DELETE_RESET","PRODUCT_CREATE_RESET","ProductListscreen","history","console","log","dispatch","userLogin","state","userInfo","productList","loading","error","products","productDelete","successDelete","success","loadingDelete","errorDelete","productCreate","successCreate","loadingCreate","errorCreate","newProduct","product","type","isAdmin","push","_id","deleteHandler","id","name","window","confirm","handleCreateProduct","map","price","category","brand"],"mappings":"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","sourcesContent":["import {useEffect} from 'react'\r\nimport Table from 'react-bootstrap/Table'\r\nimport Button from 'react-bootstrap/Button'\r\nimport Row from 'react-bootstrap/Row'\r\nimport Col from 'react-bootstrap/Col'\r\nimport { LinkContainer } from 'react-router-bootstrap'\r\nimport {useDispatch,useSelector} from 'react-redux'\r\n\r\n//My components\r\nimport Loader from '../Components/Loader'\r\nimport Message from '../Components/Message'\r\nimport { listProducts,deleteProduct,createProduct } from '../Actions/productActions'\r\nimport {PRODUCT_DELETE_RESET,PRODUCT_CREATE_RESET} from '../Constants/productConstants'\r\n\r\nfunction ProductListscreen ({history}) {\r\n    console.log(\"ProductList\")\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const userLogin = useSelector(state => state.userLogin)\r\n    const {userInfo} = userLogin\r\n\r\n    const productList = useSelector(state => state.productList)\r\n    const {loading,error,products} = productList\r\n\r\n    const productDelete = useSelector(state => state.productDelete)\r\n    const {success:successDelete,loading:loadingDelete,error:errorDelete} = productDelete\r\n\r\n    const productCreate = useSelector(state => state.productCreate)\r\n    const {success:successCreate,loading:loadingCreate,error:errorCreate,product:newProduct} = productCreate\r\n\r\n    console.log(\"successCreate\" + successCreate)\r\n    useEffect(() => {\r\n        dispatch({ type: PRODUCT_CREATE_RESET })\r\n\r\n        if (!userInfo.isAdmin) {\r\n            history.push('/login')\r\n        }\r\n\r\n        if (successCreate) {\r\n            history.push(`/admin/product/${newProduct._id}/edit`)\r\n        } else {\r\n            dispatch(listProducts())\r\n        }\r\n\r\n    }, [dispatch, history, userInfo, successDelete, successCreate, newProduct])\r\n\r\n    function deleteHandler(id,name){\r\n        if(window.confirm(`Delete product : ${name}?`)){\r\n            dispatch(deleteProduct(id))\r\n        }\r\n    }\r\n    function handleCreateProduct(){\r\n        dispatch(createProduct())\r\n    }\r\n\r\n    return loading? (<Loader/>)\r\n                  : error? (<Message variant=\"danger\">{error}</Message>)\r\n                        : (\r\n                            <div>\r\n                            <Row className=\"justify-content-center\">\r\n                                <Col md={10}>\r\n                                 <h1>Products</h1>\r\n                                </Col>\r\n                                <Col className=\"mr-0\" md={2}>\r\n                                    <Button className = \"my-3\" variant=\"primary\" onClick={handleCreateProduct}>\r\n                                    <i className='fas fa-plus'></i> Create Product\r\n                                    </Button>\r\n                                </Col>\r\n\r\n                            </Row>\r\n                            <Table striped bordered hover responsive size=\"sm\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th>ID</th>\r\n                                <th>NAME</th>\r\n                                <th>PRICE</th>\r\n                                <th>CATEGORY</th>\r\n                                <th>BRAND</th>\r\n                                <th>EDIT/DELETE</th>\r\n                            </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                            {products.map(product => (\r\n                                    <tr key={product._id}>\r\n                                        <td>{product._id}</td>\r\n                                        <td>{product.name}</td>\r\n                                        <td>&#8377;{product.price}</td>\r\n                                        <td>{product.category}</td>\r\n                                        <td>{product.brand}</td>\r\n\r\n                                        <td>\r\n                                            <LinkContainer to={`/admin/product/${product._id}/edit`}>\r\n                                                <Button variant='light' className='btn-sm'>\r\n                                                    <i className='fas fa-edit'></i>\r\n                                                </Button>\r\n                                            </LinkContainer>\r\n\r\n                                            <Button variant='danger' className='btn-sm' onClick={() => deleteHandler(product._id,product.name)}>\r\n                                                <i className='fas fa-trash'></i>\r\n                                            </Button>\r\n                                        </td>\r\n                                    </tr>\r\n                                ))}\r\n                                \r\n                            </tbody>\r\n                        </Table>\r\n                    </div>\r\n                    )\r\n    }\r\n        \r\n\r\n\r\nexport default ProductListscreen"]},"metadata":{},"sourceType":"module"}