{"ast":null,"code":"import _toConsumableArray from\"C:/Users/karth/Dev/ecommerce/frontend/ecomm/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{Row,Col,ListGroup,Image,Form,Button,Card}from'react-bootstrap';import{Link}from'react-router-dom';//Actions\nimport{addToCart,removeFromCart}from'../Actions/cartActions';//My components\nimport Message from'../Components/Message';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Cartscreen(_ref){var match=_ref.match,location=_ref.location,history=_ref.history;var queryParams=new URLSearchParams(window.location.search);var qty=parseInt(queryParams.get('qty'));var dispatch=useDispatch();var cart=useSelector(function(state){return state.cart;});var cartItems=cart.cartItems;var totalItems=cartItems.reduce(function(acc,item){return acc+item.qty;},0);var totalAmount=cartItems.reduce(function(acc,item){return acc+item.qty*item.price;},0).toFixed(2);useEffect(function(){if(match.params.id){dispatch(addToCart(match.params.id,qty));}totalItems=cartItems.reduce(function(acc,item){return acc+item.qty;},0);totalAmount=cartItems.reduce(function(acc,item){return acc+item.qty*item.price;},0).toFixed(2);},[dispatch,match.params.id,qty]);var handleRemoveFromCart=function handleRemoveFromCart(id){dispatch(removeFromCart(id));};var handleCheckout=function handleCheckout(){history.push('/login?redirect=shipping');};console.log(cartItems);return/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{xs:12,md:8,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Shopping Cart\"}),cartItems.length?/*#__PURE__*/_jsx(ListGroup,{variant:\"flush\",children:cartItems.map(function(item){return/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{className:\"align-items-start\",children:[/*#__PURE__*/_jsx(Col,{xs:3,md:2,children:/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(item.product),children:/*#__PURE__*/_jsx(Image,{src:item.image,alt:item.name,fluid:true,thumbnail:true})})}),/*#__PURE__*/_jsx(Col,{xs:3,md:3,children:/*#__PURE__*/_jsx(Link,{className:\"text-decoration-none align-middle\",to:\"/product/\".concat(item.product),children:item.name})}),/*#__PURE__*/_jsx(Col,{xs:3,md:2,className:\"py-1\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"align-middle\",children:[\"\\u20B9\",item.price]})}),/*#__PURE__*/_jsxs(Col,{xs:2,md:2,className:\"py-1\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"qty\",children:\"Qty\"}),/*#__PURE__*/_jsx(\"select\",{id:\"qty\",value:item.qty,onChange:function onChange(e){return dispatch(addToCart(item.product,Number(e.target.value)));},children:_toConsumableArray(Array(item.countInStock).keys()).map(function(x){return/*#__PURE__*/_jsx(\"option\",{value:x+1,children:x+1},x+1);})})]}),/*#__PURE__*/_jsx(Col,{xs:1,md:1,children:/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"light\",onClick:function onClick(){return handleRemoveFromCart(item.product);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})})]})},item.product);})}):/*#__PURE__*/_jsxs(Message,{variant:\"info\",children:[\"Your cart is empty. \",/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Start shopping\"})]})]}),/*#__PURE__*/_jsx(Col,{xs:8,md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Total (\",totalItems,\") items\"]}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"Amount \\u20B9\",totalAmount]})]}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(Button,{type:\"button\",className:\"btn-block\",disabled:cartItems.length===0,onClick:handleCheckout,children:\"Proceed To Checkout\"})})]})})})]});}export default Cartscreen;","map":{"version":3,"sources":["C:/Users/karth/Dev/ecommerce/frontend/ecomm/src/Screens/Cartscreen.js"],"names":["useEffect","useDispatch","useSelector","Row","Col","ListGroup","Image","Form","Button","Card","Link","addToCart","removeFromCart","Message","Cartscreen","match","location","history","queryParams","URLSearchParams","window","search","qty","parseInt","get","dispatch","cart","state","cartItems","totalItems","reduce","acc","item","totalAmount","price","toFixed","params","id","handleRemoveFromCart","handleCheckout","push","console","log","length","map","product","image","name","e","Number","target","value","Array","countInStock","keys","x"],"mappings":"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","sourcesContent":["import { useEffect } from 'react';\r\nimport {useDispatch,useSelector} from 'react-redux'\r\nimport {Row,Col,ListGroup,Image,Form,Button,Card} from 'react-bootstrap'\r\nimport {Link} from 'react-router-dom'\r\n\r\n//Actions\r\nimport {addToCart,removeFromCart } from '../Actions/cartActions'\r\n\r\n//My components\r\nimport Message from '../Components/Message'\r\n\r\n\r\nfunction Cartscreen({match,location,history}) {\r\n    const queryParams = new URLSearchParams(window.location.search);\r\n    const qty = parseInt(queryParams.get('qty'));\r\n    const dispatch = useDispatch()\r\n\r\n    const cart = useSelector(state => state.cart)\r\n    const {cartItems} = cart\r\n    let totalItems = cartItems.reduce((acc, item) => acc + item.qty, 0)\r\n    let totalAmount = cartItems.reduce((acc, item) => acc + item.qty * item.price, 0).toFixed(2)\r\n    \r\n    useEffect(()=>{\r\n        if(match.params.id){\r\n            dispatch(addToCart(match.params.id,qty))\r\n        }\r\n        totalItems = cartItems.reduce((acc, item) => acc + item.qty, 0)\r\n        totalAmount = cartItems.reduce((acc, item) => acc + item.qty * item.price, 0).toFixed(2)\r\n    },[dispatch,match.params.id,qty])\r\n\r\n    const handleRemoveFromCart = (id) => {\r\n        dispatch(removeFromCart(id))\r\n    }\r\n    const handleCheckout = () => {\r\n        history.push('/login?redirect=shipping')\r\n    }\r\n    \r\n    console.log(cartItems)\r\n  \r\n    return(\r\n        <Row>\r\n            <Col xs={12} md={8}>\r\n                <h2>Shopping Cart</h2>\r\n                {cartItems.length?\r\n                                    (<ListGroup variant=\"flush\">\r\n                                        {cartItems.map(item => (\r\n                                            <ListGroup.Item key={item.product}>\r\n                                                <Row className = \"align-items-start\">\r\n                                                    <Col xs={3} md={2} >\r\n                                                        <Link to = {`/product/${item.product}`}>\r\n                                                         <Image src={item.image} alt={item.name} fluid thumbnail/>\r\n                                                        </Link>\r\n                                                       \r\n                                                    </Col>\r\n                                                    <Col xs={3} md={3}>\r\n                                                        <Link className = \"text-decoration-none align-middle\" to = {`/product/${item.product}`}>\r\n                                                            {item.name}\r\n                                                        </Link>\r\n                                                    </Col>\r\n                                                    <Col xs={3} md={2} className = \"py-1\">\r\n                                                       <span className=\"align-middle\">&#8377;{item.price}</span>\r\n                                                    </Col>\r\n                                                    <Col xs={2} md={2} className=\"py-1\">\r\n                                                        <label htmlFor=\"qty\">Qty</label> \r\n                                                        <select\r\n                                                            id=\"qty\"\r\n                                                            value={item.qty}\r\n                                                            onChange={(e) => dispatch(addToCart(item.product, Number(e.target.value)))}\r\n                                                        >\r\n                                                            {\r\n\r\n                                                                [...Array(item.countInStock).keys()].map((x) => (\r\n                                                                    <option key={x + 1} value={x + 1}>\r\n                                                                        {x + 1}\r\n                                                                    </option>\r\n                                                                ))\r\n                                                            }\r\n\r\n                                                        </select>\r\n                                                    </Col>\r\n                                                    <Col xs={1} md={1}>\r\n                                                        <Button\r\n                                                            type='button'\r\n                                                            variant='light'\r\n                                                            onClick={() => handleRemoveFromCart(item.product)}\r\n                                                        >\r\n                                                            <i className='fas fa-trash'></i>\r\n                                                        </Button>\r\n                                                </Col>\r\n                                            </Row>\r\n                                                \r\n\r\n                                            </ListGroup.Item>\r\n                                        ))}\r\n                                    </ListGroup>\r\n                                    )\r\n                                    : <Message variant=\"info\">Your cart is empty. <Link to=\"/\">Start shopping</Link></Message>\r\n                }\r\n            </Col>\r\n\r\n            <Col xs={8} md={4}>\r\n            <Card>\r\n                    <ListGroup variant='flush'>\r\n                        <ListGroup.Item>\r\n                            <h3>Total ({totalItems}) items</h3>\r\n                            <h4>Amount &#8377;{totalAmount}</h4>\r\n                        </ListGroup.Item>\r\n                   \r\n\r\n                    <ListGroup.Item>\r\n                        <Button\r\n                            type='button'\r\n                            className='btn-block'\r\n                            disabled={cartItems.length === 0}\r\n                            onClick={handleCheckout}\r\n                        >\r\n                            Proceed To Checkout\r\n                        </Button>\r\n                    </ListGroup.Item>\r\n\r\n                    </ListGroup>\r\n                </Card>\r\n            </Col>\r\n        </Row>\r\n    )\r\n}\r\n\r\nexport default Cartscreen"]},"metadata":{},"sourceType":"module"}