{"ast":null,"code":"import{useEffect}from'react';import Table from'react-bootstrap/Table';import Button from'react-bootstrap/Button';import{LinkContainer}from'react-router-bootstrap';import{useDispatch,useSelector}from'react-redux';import{getUserList,deleteUser}from'../Actions/userActions';//My components\nimport Loader from'../Components/Loader';import Message from'../Components/Message';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function UserListscreen(_ref){var history=_ref.history;var dispatch=useDispatch();var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;var userList=useSelector(function(state){return state.userList;});var loading=userList.loading,error=userList.error,users=userList.users;var userDelete=useSelector(function(state){return state.userDelete;});var _userDelete={userDelete:userDelete},successDelete=_userDelete.success;useEffect(function(){if(userInfo&&userInfo.isAdmin){dispatch(getUserList());}else{history.push('/login');}},[dispatch,userInfo,history,successDelete]);function deleteHandler(id,name){if(window.confirm(\"Delete user \".concat(name,\"?\"))){dispatch(deleteUser(id));}}return loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,responsive:true,size:\"sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"NAME\"}),/*#__PURE__*/_jsx(\"th\",{children:\"EMAIL\"}),/*#__PURE__*/_jsx(\"th\",{children:\"ADMIN\"}),/*#__PURE__*/_jsx(\"th\",{children:\"EDIT/DELETE\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.map(function(user){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:user._id}),/*#__PURE__*/_jsx(\"td\",{children:user.name}),/*#__PURE__*/_jsx(\"td\",{children:user.email}),/*#__PURE__*/_jsx(\"td\",{children:user.isAdmin?/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-check\",style:{color:'green'}}):/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times\",style:{color:'red'}})}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(LinkContainer,{to:\"/admin/user/\".concat(user._id,\"/edit\"),children:/*#__PURE__*/_jsx(Button,{variant:\"light\",className:\"btn-sm\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit\"})})}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",className:\"btn-sm\",onClick:function onClick(){return deleteHandler(user._id,user.name);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})]})]},user._id);})})]});}export default UserListscreen;","map":{"version":3,"sources":["C:/Users/supre/Docs/GitHub/ecomm/src/Screens/UserListscreen.js"],"names":["useEffect","Table","Button","LinkContainer","useDispatch","useSelector","getUserList","deleteUser","Loader","Message","UserListscreen","history","dispatch","userLogin","state","userInfo","userList","loading","error","users","userDelete","successDelete","success","isAdmin","push","deleteHandler","id","name","window","confirm","map","user","_id","email","color"],"mappings":"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","sourcesContent":["import {useEffect} from 'react'\r\nimport Table from 'react-bootstrap/Table'\r\nimport Button from 'react-bootstrap/Button'\r\nimport { LinkContainer } from 'react-router-bootstrap'\r\nimport {useDispatch,useSelector} from 'react-redux'\r\nimport {getUserList,deleteUser} from '../Actions/userActions'\r\n\r\n//My components\r\nimport Loader from '../Components/Loader'\r\nimport Message from '../Components/Message'\r\n\r\nfunction UserListscreen ({history}) {\r\n    const dispatch = useDispatch()\r\n\r\n    const userLogin = useSelector(state => state.userLogin)\r\n    const {userInfo} = userLogin\r\n\r\n    const userList = useSelector(state => state.userList)\r\n    const {loading,error,users} = userList\r\n\r\n    const userDelete = useSelector(state => state.userDelete)\r\n    const {success:successDelete} = {userDelete}\r\n\r\n    useEffect(()=>{\r\n        if(userInfo && userInfo.isAdmin)  {\r\n           dispatch(getUserList()) \r\n        }else{\r\n            history.push('/login')\r\n        }\r\n    },[dispatch,userInfo,history,successDelete])\r\n\r\n    function deleteHandler(id,name){\r\n        if(window.confirm(`Delete user ${name}?`)){\r\n            dispatch(deleteUser(id))\r\n        }\r\n    }\r\n\r\n    return loading? (<Loader/>)\r\n                  : error? (<Message variant=\"danger\">{error}</Message>)\r\n                        : (\r\n                            <Table striped bordered hover responsive size=\"sm\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th>ID</th>\r\n                                <th>NAME</th>\r\n                                <th>EMAIL</th>\r\n                                <th>ADMIN</th>\r\n                                <th>EDIT/DELETE</th>\r\n                            </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                            {users.map(user => (\r\n                                    <tr key={user._id}>\r\n                                        <td>{user._id}</td>\r\n                                        <td>{user.name}</td>\r\n                                        <td>{user.email}</td>\r\n                                        <td>{user.isAdmin ? (\r\n                                            <i className='fas fa-check' style={{ color: 'green' }}></i>\r\n                                        ) : (\r\n                                                <i className='fas fa-times' style={{ color: 'red' }}></i>\r\n                                            )}</td>\r\n\r\n                                        <td>\r\n                                            <LinkContainer to={`/admin/user/${user._id}/edit`}>\r\n                                                <Button variant='light' className='btn-sm'>\r\n                                                    <i className='fas fa-edit'></i>\r\n                                                </Button>\r\n                                            </LinkContainer>\r\n\r\n                                            <Button variant='danger' className='btn-sm' onClick={() => deleteHandler(user._id,user.name)}>\r\n                                                <i className='fas fa-trash'></i>\r\n                                            </Button>\r\n                                        </td>\r\n                                    </tr>\r\n                                ))}\r\n                                \r\n                            </tbody>\r\n                        </Table>\r\n                    )\r\n    }\r\n        \r\n\r\n\r\nexport default UserListscreen"]},"metadata":{},"sourceType":"module"}