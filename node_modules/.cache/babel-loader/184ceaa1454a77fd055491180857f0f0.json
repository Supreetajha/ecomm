{"ast":null,"code":"import { ORDER_CREATE_REQUEST, ORDER_CREATE_SUCCESS, ORDER_CREATE_FAIL, ORDER_CREATE_RESET, ORDER_DETAILS_REQUEST, ORDER_DETAILS_SUCCESS, ORDER_DETAILS_FAIL } from '../Constants/orderConstants';\nimport { CART_CLEAR_ITEMS } from '../Constants/cartConstants';\nimport axios from 'axios';\nexport const createOrder = order => async (dispatch, getState) => {\n  try {\n    const {\n      userLogin\n    } = getState();\n    const {\n      userInfo\n    } = userLogin;\n    const config = {\n      headers: {\n        'Content-type': 'Application/json',\n        Authorization: 'Bearer ' + userInfo.token\n      }\n    };\n    dispatch({\n      type: ORDER_DETAILS_REQUEST\n    });\n    const {\n      data\n    } = await axios.post(`/api/orders/add/`, order, config);\n    dispatch({\n      type: ORDER_DETAILS_SUCCESS,\n      payload: data\n    });\n    dispatch({\n      type: CART_CLEAR_ITEMS,\n      payload: data\n    });\n    localStorage.removeItem('cartItems');\n  } catch (error) {\n    dispatch({\n      type: ORDER_DETAILS_FAIL,\n      payload: error.response && error.response.data.detail ? error.response.data.detail : error.message\n    });\n  }\n};\nexport const getOrderDetails = id => async (dispatch, getState) => {\n  try {\n    const {\n      userLogin\n    } = getState();\n    const {\n      userInfo\n    } = userLogin;\n    const config = {\n      headers: {\n        'Content-type': 'Application/json',\n        Authorization: 'Bearer ' + userInfo.token\n      }\n    };\n    dispatch({\n      type: ORDER_CREATE_REQUEST\n    });\n    const {\n      data\n    } = await axios.get(`/api/orders/${id}/`, config);\n    dispatch({\n      type: ORDER_CREATE_SUCCESS,\n      payload: data\n    });\n    dispatch({\n      type: CART_CLEAR_ITEMS,\n      payload: data\n    });\n    localStorage.removeItem('cartItems');\n  } catch (error) {\n    dispatch({\n      type: ORDER_CREATE_FAIL,\n      payload: error.response && error.response.data.detail ? error.response.data.detail : error.message\n    });\n  }\n};","map":{"version":3,"sources":["C:/Users/supre/Documents/ecomm/src/Actions/orderActions.js"],"names":["ORDER_CREATE_REQUEST","ORDER_CREATE_SUCCESS","ORDER_CREATE_FAIL","ORDER_CREATE_RESET","ORDER_DETAILS_REQUEST","ORDER_DETAILS_SUCCESS","ORDER_DETAILS_FAIL","CART_CLEAR_ITEMS","axios","createOrder","order","dispatch","getState","userLogin","userInfo","config","headers","Authorization","token","type","data","post","payload","localStorage","removeItem","error","response","detail","message","getOrderDetails","id","get"],"mappings":"AAAA,SACIA,oBADJ,EAEIC,oBAFJ,EAGIC,iBAHJ,EAIIC,kBAJJ,EAMIC,qBANJ,EAOIC,qBAPJ,EAQIC,kBARJ,QAUO,6BAVP;AAYA,SAAQC,gBAAR,QAA+B,4BAA/B;AAEA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,OAAO,MAAMC,WAAW,GAAIC,KAAD,IAAW,OAAMC,QAAN,EAAeC,QAAf,KAA0B;AAC5D,MAAG;AACC,UAAM;AAACC,MAAAA;AAAD,QAAcD,QAAQ,EAA5B;AACA,UAAM;AAACE,MAAAA;AAAD,QAAaD,SAAnB;AAEA,UAAME,MAAM,GAAG;AACXC,MAAAA,OAAO,EAAC;AAAC,wBAAgB,kBAAjB;AACCC,QAAAA,aAAa,EAAE,YAAUH,QAAQ,CAACI;AADnC;AADG,KAAf;AAMAP,IAAAA,QAAQ,CAAC;AAACQ,MAAAA,IAAI,EAACf;AAAN,KAAD,CAAR;AAEA,UAAM;AAACgB,MAAAA;AAAD,QAAS,MAAMZ,KAAK,CAACa,IAAN,CAAY,kBAAZ,EACLX,KADK,EAELK,MAFK,CAArB;AAIAJ,IAAAA,QAAQ,CAAC;AAACQ,MAAAA,IAAI,EAAEd,qBAAP;AAA8BiB,MAAAA,OAAO,EAACF;AAAtC,KAAD,CAAR;AACAT,IAAAA,QAAQ,CAAC;AACLQ,MAAAA,IAAI,EAAEZ,gBADD;AAELe,MAAAA,OAAO,EAAEF;AAFJ,KAAD,CAAR;AAIAG,IAAAA,YAAY,CAACC,UAAb,CAAwB,WAAxB;AAEH,GAvBD,CAuBC,OAAMC,KAAN,EAAa;AACVd,IAAAA,QAAQ,CAAC;AAACQ,MAAAA,IAAI,EAAEb,kBAAP;AACLgB,MAAAA,OAAO,EAACG,KAAK,CAACC,QAAN,IAAgBD,KAAK,CAACC,QAAN,CAAeN,IAAf,CAAoBO,MAApC,GACCF,KAAK,CAACC,QAAN,CAAeN,IAAf,CAAoBO,MADrB,GAECF,KAAK,CAACG;AAHV,KAAD,CAAR;AAIH;AAEJ,CA/BM;AAiCP,OAAO,MAAMC,eAAe,GAAIC,EAAD,IAAQ,OAAMnB,QAAN,EAAeC,QAAf,KAA4B;AAC/D,MAAG;AACC,UAAM;AAACC,MAAAA;AAAD,QAAcD,QAAQ,EAA5B;AACA,UAAM;AAACE,MAAAA;AAAD,QAAaD,SAAnB;AAEA,UAAME,MAAM,GAAG;AACXC,MAAAA,OAAO,EAAC;AAAC,wBAAgB,kBAAjB;AACCC,QAAAA,aAAa,EAAE,YAAUH,QAAQ,CAACI;AADnC;AADG,KAAf;AAMAP,IAAAA,QAAQ,CAAC;AAACQ,MAAAA,IAAI,EAACnB;AAAN,KAAD,CAAR;AAEA,UAAM;AAACoB,MAAAA;AAAD,QAAS,MAAMZ,KAAK,CAACuB,GAAN,CAAW,eAAcD,EAAG,GAA5B,EACLf,MADK,CAArB;AAGAJ,IAAAA,QAAQ,CAAC;AAACQ,MAAAA,IAAI,EAAElB,oBAAP;AAA6BqB,MAAAA,OAAO,EAACF;AAArC,KAAD,CAAR;AACAT,IAAAA,QAAQ,CAAC;AACLQ,MAAAA,IAAI,EAAEZ,gBADD;AAELe,MAAAA,OAAO,EAAEF;AAFJ,KAAD,CAAR;AAIAG,IAAAA,YAAY,CAACC,UAAb,CAAwB,WAAxB;AAEH,GAtBD,CAsBC,OAAMC,KAAN,EAAa;AACVd,IAAAA,QAAQ,CAAC;AAACQ,MAAAA,IAAI,EAAEjB,iBAAP;AACLoB,MAAAA,OAAO,EAACG,KAAK,CAACC,QAAN,IAAgBD,KAAK,CAACC,QAAN,CAAeN,IAAf,CAAoBO,MAApC,GACCF,KAAK,CAACC,QAAN,CAAeN,IAAf,CAAoBO,MADrB,GAECF,KAAK,CAACG;AAHV,KAAD,CAAR;AAIH;AAEJ,CA9BM","sourcesContent":["import {\r\n    ORDER_CREATE_REQUEST,\r\n    ORDER_CREATE_SUCCESS,\r\n    ORDER_CREATE_FAIL,\r\n    ORDER_CREATE_RESET,\r\n\r\n    ORDER_DETAILS_REQUEST,\r\n    ORDER_DETAILS_SUCCESS,\r\n    ORDER_DETAILS_FAIL,\r\n\r\n} from '../Constants/orderConstants'\r\n\r\nimport {CART_CLEAR_ITEMS} from '../Constants/cartConstants'\r\n\r\nimport axios from 'axios'\r\n\r\nexport const createOrder = (order) => async(dispatch,getState)=>{\r\n    try{\r\n        const {userLogin} = getState()\r\n        const {userInfo} = userLogin\r\n\r\n        const config = {\r\n            headers:{'Content-type' :'Application/json',\r\n                     Authorization: 'Bearer '+userInfo.token\r\n                    }\r\n\r\n        }\r\n        dispatch({type:ORDER_DETAILS_REQUEST})\r\n\r\n        const {data} = await axios.post(`/api/orders/add/`,\r\n                        order,\r\n                        config)\r\n\r\n        dispatch({type: ORDER_DETAILS_SUCCESS, payload:data})\r\n        dispatch({\r\n            type: CART_CLEAR_ITEMS,\r\n            payload: data\r\n        })\r\n        localStorage.removeItem('cartItems')\r\n  \r\n    }catch(error) {\r\n        dispatch({type: ORDER_DETAILS_FAIL, \r\n            payload:error.response&&error.response.data.detail\r\n                    ?error.response.data.detail\r\n                    :error.message})     \r\n    }\r\n\r\n}\r\n\r\nexport const getOrderDetails = (id) => async(dispatch,getState) => {\r\n    try{\r\n        const {userLogin} = getState()\r\n        const {userInfo} = userLogin\r\n\r\n        const config = {\r\n            headers:{'Content-type' :'Application/json',\r\n                     Authorization: 'Bearer '+userInfo.token\r\n                    }\r\n\r\n        }\r\n        dispatch({type:ORDER_CREATE_REQUEST})\r\n\r\n        const {data} = await axios.get(`/api/orders/${id}/`,\r\n                        config)\r\n\r\n        dispatch({type: ORDER_CREATE_SUCCESS, payload:data})\r\n        dispatch({\r\n            type: CART_CLEAR_ITEMS,\r\n            payload: data\r\n        })\r\n        localStorage.removeItem('cartItems')\r\n  \r\n    }catch(error) {\r\n        dispatch({type: ORDER_CREATE_FAIL, \r\n            payload:error.response&&error.response.data.detail\r\n                    ?error.response.data.detail\r\n                    :error.message})     \r\n    }\r\n\r\n}"]},"metadata":{},"sourceType":"module"}