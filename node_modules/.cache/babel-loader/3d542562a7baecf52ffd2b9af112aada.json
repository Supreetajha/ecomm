{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/supre/Docs/GitHub/ecomm/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/supre/Docs/GitHub/ecomm/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/supre/Docs/GitHub/ecomm/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import Form from'react-bootstrap/Form';import Button from'react-bootstrap/Button';import{Link}from'react-router-dom';import axios from'axios';//My components\nimport FormContainer from'../Components/FormContainer';import{listProductDetails,updateProduct}from'../Actions/productActions';import Loader from'../Components/Loader';import Message from'../Components/Message';import{PRODUCT_UPDATE_RESET}from'../Constants/productConstants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ProductEditscreen(_ref){var match=_ref.match,history=_ref.history;var productId=match.params.id;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),price=_useState4[0],setPrice=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),brand=_useState6[0],setBrand=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),category=_useState8[0],setCategory=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),image=_useState10[0],setImage=_useState10[1];var _useState11=useState(0),_useState12=_slicedToArray(_useState11,2),countInStock=_useState12[0],setCountInStock=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),description=_useState14[0],setDescription=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),uploading=_useState16[0],setUploading=_useState16[1];var dispatch=useDispatch();var productDetails=useSelector(function(state){return state.productDetails;});var loading=productDetails.loading,error=productDetails.error,newProduct=productDetails.product;var productUpdate=useSelector(function(state){return state.productUpdate;});var loadingUpdate=productUpdate.loading,errorUpdate=productUpdate.error,successUpdate=productUpdate.success;useEffect(function(){if(successUpdate){dispatch({type:PRODUCT_UPDATE_RESET});history.push(\"/admin/productlist\");}else{if(!newProduct.name||newProduct._id!==Number(productId)){dispatch(listProductDetails(productId));}else{if(name!==newProduct.name){setName(newProduct.name);setPrice(newProduct.price);setBrand(newProduct.brand);setCategory(newProduct.category);setImage(newProduct.image);setCountInStock(newProduct.countInStock);setDescription(newProduct.description);}}}},[dispatch,productId,newProduct,successUpdate,history,name]);var handleEdit=function handleEdit(e){e.preventDefault();dispatch(updateProduct({_id:newProduct._id,name:name,price:price,brand:brand,category:category,image:image,countInStock:countInStock,description:description}));};var uploadImage=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var file,formData,config,_yield$axios$post,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:file=e.target.files[0];formData=new FormData();formData.append('image',file);formData.append('product_id',productId);setUploading(true);_context.prev=5;config={headers:{'Content-Type':'multipart/form-data'}};_context.next=9;return axios.post('/api/products/upload/',formData,config);case 9:_yield$axios$post=_context.sent;data=_yield$axios$post.data;setImage(data);setUploading(false);_context.next=18;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](5);setUploading(false);case 18:case\"end\":return _context.stop();}}},_callee,null,[[5,15]]);}));return function uploadImage(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Link,{to:\"/admin/productlist\",children:\"Go Back\"}),loading&&/*#__PURE__*/_jsx(Loader,{}),error&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}),/*#__PURE__*/_jsx(FormContainer,{children:/*#__PURE__*/_jsxs(Form,{onSubmit:handleEdit,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Edit Product\"}),loadingUpdate&&/*#__PURE__*/_jsx(Loader,{}),errorUpdate&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorUpdate}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"name\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Product Name\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Enter product name\",value:name,onChange:function onChange(e){return setName(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"price\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Price\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"number\",placeholder:\"Enter price\",value:price,onChange:function onChange(e){return setPrice(e.target.value);}})]}),uploading&&/*#__PURE__*/_jsx(Loader,{}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"image\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Image\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Enter Image\",value:image,onChange:function onChange(e){return setImage(e.target.value);}}),/*#__PURE__*/_jsx(Form.Control,{type:\"file\",controlId:\"image-file\",label:\"Choose file to upload\",custom:true,onChange:uploadImage})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"brand\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Brand\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Enter Brand\",value:brand,onChange:function onChange(e){return setBrand(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"category\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Category\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Enter Category\",value:category,onChange:function onChange(e){return setCategory(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"countinstock\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Stock Level\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"number\",placeholder:\"Enter Stock Level\",value:countInStock,onChange:function onChange(e){return setCountInStock(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"description\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Description\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Enter description\",value:description,onChange:function onChange(e){return setDescription(e.target.value);}})]}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",onClick:handleEdit,children:\"Update\"})]})})]});}export default ProductEditscreen;","map":{"version":3,"sources":["C:/Users/supre/Docs/GitHub/ecomm/src/Screens/ProductEditscreen.js"],"names":["useState","useEffect","useDispatch","useSelector","Form","Button","Link","axios","FormContainer","listProductDetails","updateProduct","Loader","Message","PRODUCT_UPDATE_RESET","ProductEditscreen","match","history","productId","params","id","name","setName","price","setPrice","brand","setBrand","category","setCategory","image","setImage","countInStock","setCountInStock","description","setDescription","uploading","setUploading","dispatch","productDetails","state","loading","error","newProduct","product","productUpdate","loadingUpdate","errorUpdate","successUpdate","success","type","push","_id","Number","handleEdit","e","preventDefault","uploadImage","file","target","files","formData","FormData","append","config","headers","post","data","value"],"mappings":"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","sourcesContent":["import {useState,useEffect} from 'react'\r\nimport {useDispatch,useSelector} from 'react-redux'\r\nimport Form from 'react-bootstrap/Form'\r\nimport Button from 'react-bootstrap/Button'\r\nimport {Link} from 'react-router-dom'\r\nimport axios from 'axios'\r\n\r\n//My components\r\nimport FormContainer from '../Components/FormContainer'\r\nimport {listProductDetails,updateProduct} from '../Actions/productActions'\r\n\r\nimport Loader from '../Components/Loader'\r\nimport Message from '../Components/Message'\r\nimport { PRODUCT_UPDATE_RESET } from '../Constants/productConstants'\r\n\r\n\r\nfunction ProductEditscreen({match,history}) {\r\n\r\n    const productId = match.params.id\r\n\r\n    const [name,setName] = useState('')\r\n    const [price,setPrice] = useState(0)\r\n    const [brand,setBrand] = useState('')\r\n    const [category,setCategory] = useState('')\r\n    const [image,setImage] = useState('')\r\n    const [countInStock,setCountInStock] = useState(0)\r\n    const [description,setDescription] = useState('')\r\n    const [uploading,setUploading] = useState(false)\r\n    \r\n    const dispatch = useDispatch()\r\n    \r\n    const productDetails = useSelector(state=>state.productDetails)\r\n    const {loading,error,product:newProduct} = productDetails\r\n\r\n    const productUpdate = useSelector(state=>state.productUpdate)\r\n    const {loading:loadingUpdate,error:errorUpdate,success:successUpdate} = productUpdate\r\n\r\n    useEffect(()=>{\r\n        if(successUpdate) {\r\n            dispatch({type:PRODUCT_UPDATE_RESET})\r\n            history.push(\"/admin/productlist\")\r\n        } else{\r\n            if(!newProduct.name || newProduct._id !== Number(productId)){\r\n                dispatch(listProductDetails(productId))\r\n            } else {\r\n                if(name !== newProduct.name)\r\n                {\r\n                    setName(newProduct.name)\r\n                    setPrice(newProduct.price)\r\n                    setBrand(newProduct.brand)\r\n                    setCategory(newProduct.category)\r\n                    setImage(newProduct.image)\r\n                    setCountInStock(newProduct.countInStock)\r\n                    setDescription(newProduct.description)\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n    },[dispatch,productId,newProduct,successUpdate,history,name])\r\n\r\n    const handleEdit = (e) => {\r\n        e.preventDefault()\r\n        dispatch(updateProduct({\r\n            _id:newProduct._id,\r\n            name,\r\n            price,\r\n            brand,\r\n            category,\r\n            image,\r\n            countInStock,\r\n            description}))\r\n    }\r\n    const uploadImage = async(e) => {\r\n        const file = e.target.files[0]\r\n        const formData = new FormData()\r\n\r\n        formData.append('image', file)\r\n        formData.append('product_id', productId)\r\n\r\n        setUploading(true)\r\n\r\n        try {\r\n            const config = {\r\n                headers: {\r\n                    'Content-Type': 'multipart/form-data'\r\n                }\r\n            }\r\n\r\n            const { data } = await axios.post('/api/products/upload/', formData, config)\r\n\r\n\r\n            setImage(data)\r\n            setUploading(false)\r\n\r\n        } catch (error) {\r\n            setUploading(false)\r\n        }\r\n\r\n    }\r\n    return(\r\n        <div>\r\n            <Link to=\"/admin/productlist\">\r\n             Go Back\r\n            </Link>\r\n\r\n            {loading && <Loader />} \r\n            {error && <Message variant=\"danger\">{error}</Message>}  \r\n\r\n\r\n            <FormContainer>\r\n            \r\n            <Form onSubmit = {handleEdit}>\r\n                <h2>Edit Product</h2>  \r\n                {loadingUpdate && <Loader />} \r\n                {errorUpdate && <Message variant=\"danger\">{errorUpdate}</Message>}  \r\n                <Form.Group className=\"mb-3\" controlId=\"name\">\r\n                    <Form.Label>Product Name</Form.Label>\r\n                    <Form.Control \r\n                    type=\"text\" \r\n                    placeholder=\"Enter product name\"\r\n                    value = {name}\r\n                    onChange = {(e) => setName(e.target.value)} \r\n                   />\r\n                </Form.Group>\r\n                <Form.Group className=\"mb-3\" controlId=\"price\">\r\n                    <Form.Label>Price</Form.Label>\r\n                    <Form.Control \r\n                    type=\"number\" \r\n                    placeholder=\"Enter price\"\r\n                    value = {price}\r\n                    onChange = {(e) => setPrice(e.target.value)} \r\n                   />\r\n                </Form.Group>\r\n                {uploading && <Loader />}\r\n                <Form.Group className=\"mb-3\" controlId=\"image\">\r\n                    <Form.Label>Image</Form.Label>\r\n                    <Form.Control \r\n                    type=\"text\" \r\n                    placeholder=\"Enter Image\"\r\n                    value = {image}\r\n                    onChange = {(e) => setImage(e.target.value)} \r\n                   />\r\n                   <Form.Control\r\n                    type =\"file\"\r\n                    controlId=\"image-file\"\r\n                    label=\"Choose file to upload\"\r\n                    custom\r\n                    onChange = {uploadImage}\r\n                   />\r\n                </Form.Group>\r\n                <Form.Group className=\"mb-3\" controlId=\"brand\">\r\n                    <Form.Label>Brand</Form.Label>\r\n                    <Form.Control \r\n                    type=\"text\" \r\n                    placeholder=\"Enter Brand\"\r\n                    value = {brand}\r\n                    onChange = {(e) => setBrand(e.target.value)} \r\n                   />\r\n                </Form.Group>\r\n                <Form.Group className=\"mb-3\" controlId=\"category\">\r\n                    <Form.Label>Category</Form.Label>\r\n                    <Form.Control \r\n                    type=\"text\" \r\n                    placeholder=\"Enter Category\"\r\n                    value = {category}\r\n                    onChange = {(e) => setCategory(e.target.value)} \r\n                   />\r\n                </Form.Group>\r\n                <Form.Group className=\"mb-3\" controlId=\"countinstock\">\r\n                    <Form.Label>Stock Level</Form.Label>\r\n                    <Form.Control \r\n                    type=\"number\" \r\n                    placeholder=\"Enter Stock Level\"\r\n                    value = {countInStock}\r\n                    onChange = {(e) => setCountInStock(e.target.value)} \r\n                   />\r\n                </Form.Group>\r\n                <Form.Group className=\"mb-3\" controlId=\"description\">\r\n                    <Form.Label>Description</Form.Label>\r\n                    <Form.Control \r\n                    type=\"text\" \r\n                    placeholder=\"Enter description\"\r\n                    value = {description}\r\n                    onChange = {(e) => setDescription(e.target.value)} \r\n                   />\r\n                </Form.Group>\r\n                \r\n                \r\n\r\n                <Button variant=\"primary\" \r\n                type=\"submit\" \r\n                onClick= {handleEdit}>\r\n                    Update\r\n                </Button>\r\n            </Form>\r\n            </FormContainer>\r\n       \r\n        </div>\r\n      )\r\n}\r\n\r\nexport default ProductEditscreen"]},"metadata":{},"sourceType":"module"}