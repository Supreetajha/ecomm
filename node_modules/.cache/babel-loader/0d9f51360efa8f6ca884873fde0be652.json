{"ast":null,"code":"import _toConsumableArray from\"C:/Users/supre/Docs/GitHub/ecomm/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{Row,Col,ListGroup,Image,Button,Card}from'react-bootstrap';import{Link}from'react-router-dom';//Actions\nimport{addToCart,removeFromCart}from'../Actions/cartActions';//My components\nimport Message from'../Components/Message';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Cartscreen(_ref){var match=_ref.match,location=_ref.location,history=_ref.history;var productId=match.params.id;var qty=location.search?Number(location.search.split('=')[1]):1;var dispatch=useDispatch();var cart=useSelector(function(state){return state.cart;});var cartItems=cart.cartItems;useEffect(function(){if(productId){dispatch(addToCart(productId,qty));}},[dispatch,productId,qty]);var handleRemoveFromCart=function handleRemoveFromCart(id){dispatch(removeFromCart(id));};var handleCheckout=function handleCheckout(){history.push('/login?redirect=shipping');};console.log(cartItems);return/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{xs:12,md:8,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Shopping Cart\"}),cartItems.length?/*#__PURE__*/_jsx(ListGroup,{variant:\"flush\",children:cartItems.map(function(item){return/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{className:\"align-items-start\",children:[/*#__PURE__*/_jsx(Col,{xs:3,md:2,children:/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(item.product),children:/*#__PURE__*/_jsx(Image,{src:item.image,alt:item.name,fluid:true,thumbnail:true})})}),/*#__PURE__*/_jsx(Col,{xs:3,md:3,children:/*#__PURE__*/_jsx(Link,{className:\"text-decoration-none align-middle\",to:\"/product/\".concat(item.product),children:item.name})}),/*#__PURE__*/_jsx(Col,{xs:3,md:2,className:\"py-1\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"align-middle\",children:[\"\\u20B9\",item.price]})}),/*#__PURE__*/_jsxs(Col,{xs:2,md:2,className:\"py-1\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"qty\",children:\"Qty\"}),/*#__PURE__*/_jsx(\"select\",{id:\"qty\",value:item.qty,onChange:function onChange(e){return dispatch(addToCart(item.product,Number(e.target.value)));},children:_toConsumableArray(Array(item.countInStock).keys()).map(function(x){return/*#__PURE__*/_jsx(\"option\",{value:x+1,children:x+1},x+1);})})]}),/*#__PURE__*/_jsx(Col,{xs:1,md:1,children:/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"light\",onClick:function onClick(){return handleRemoveFromCart(item.product);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})})]})},item.product);})}):/*#__PURE__*/_jsxs(Message,{variant:\"info\",children:[\"Your cart is empty. \",/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Start shopping\"})]})]}),/*#__PURE__*/_jsx(Col,{xs:8,md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Total (\",cartItems.reduce(function(acc,item){return acc+item.qty;},0),\") items\"]}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"Amount \\u20B9\",cartItems.reduce(function(acc,item){return acc+item.qty*item.price;},0).toFixed(2)]})]}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(Button,{type:\"button\",className:\"btn-block\",disabled:cartItems.length===0,onClick:handleCheckout,children:\"Proceed To Checkout\"})})]})})})]});}export default Cartscreen;","map":{"version":3,"sources":["C:/Users/supre/Docs/GitHub/ecomm/src/Screens/Cartscreen.js"],"names":["useEffect","useDispatch","useSelector","Row","Col","ListGroup","Image","Button","Card","Link","addToCart","removeFromCart","Message","Cartscreen","match","location","history","productId","params","id","qty","search","Number","split","dispatch","cart","state","cartItems","handleRemoveFromCart","handleCheckout","push","console","log","length","map","item","product","image","name","price","e","target","value","Array","countInStock","keys","x","reduce","acc","toFixed"],"mappings":"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","sourcesContent":["import { useEffect} from 'react';\r\nimport {useDispatch,useSelector} from 'react-redux'\r\nimport {Row,Col,ListGroup,Image,Button,Card} from 'react-bootstrap'\r\nimport {Link} from 'react-router-dom'\r\n\r\n//Actions\r\nimport {addToCart,removeFromCart } from '../Actions/cartActions'\r\n\r\n//My components\r\nimport Message from '../Components/Message'\r\n\r\n\r\nfunction Cartscreen({match,location,history}) {\r\n    const productId = match.params.id\r\n    const qty = location.search ? Number(location.search.split('=')[1]) : 1\r\n    const dispatch = useDispatch()\r\n\r\n    const cart = useSelector(state => state.cart)\r\n    const {cartItems} = cart\r\n    \r\n    useEffect(()=>{\r\n        if(productId){\r\n            dispatch(addToCart(productId,qty))\r\n        }\r\n    },[dispatch,productId,qty])\r\n\r\n    const handleRemoveFromCart = (id) => {\r\n        dispatch(removeFromCart(id))\r\n    }\r\n    const handleCheckout = () => {\r\n        history.push('/login?redirect=shipping')\r\n    }\r\n    \r\n    console.log(cartItems)\r\n  \r\n    return(\r\n        <Row>\r\n            <Col xs={12} md={8}>\r\n                <h2>Shopping Cart</h2>\r\n                {cartItems.length?\r\n                                    (<ListGroup variant=\"flush\">\r\n                                        {cartItems.map(item => (\r\n                                            <ListGroup.Item key={item.product}>\r\n                                                <Row className = \"align-items-start\">\r\n                                                    <Col xs={3} md={2} >\r\n                                                        <Link to = {`/product/${item.product}`}>\r\n                                                         <Image src={item.image} alt={item.name} fluid thumbnail/>\r\n                                                        </Link>\r\n                                                       \r\n                                                    </Col>\r\n                                                    <Col xs={3} md={3}>\r\n                                                        <Link className = \"text-decoration-none align-middle\" to = {`/product/${item.product}`}>\r\n                                                            {item.name}\r\n                                                        </Link>\r\n                                                    </Col>\r\n                                                    <Col xs={3} md={2} className = \"py-1\">\r\n                                                       <span className=\"align-middle\">&#8377;{item.price}</span>\r\n                                                    </Col>\r\n                                                    <Col xs={2} md={2} className=\"py-1\">\r\n                                                        <label htmlFor=\"qty\">Qty</label> \r\n                                                        <select\r\n                                                            id=\"qty\"\r\n                                                            value={item.qty}\r\n                                                            onChange={(e) => dispatch(addToCart(item.product, Number(e.target.value)))}\r\n                                                        >\r\n                                                            {\r\n\r\n                                                                [...Array(item.countInStock).keys()].map((x) => (\r\n                                                                    <option key={x + 1} value={x + 1}>\r\n                                                                        {x + 1}\r\n                                                                    </option>\r\n                                                                ))\r\n                                                            }\r\n\r\n                                                        </select>\r\n                                                    </Col>\r\n                                                    <Col xs={1} md={1}>\r\n                                                        <Button\r\n                                                            type='button'\r\n                                                            variant='light'\r\n                                                            onClick={() => handleRemoveFromCart(item.product)}\r\n                                                        >\r\n                                                            <i className='fas fa-trash'></i>\r\n                                                        </Button>\r\n                                                </Col>\r\n                                            </Row>\r\n                                                \r\n\r\n                                            </ListGroup.Item>\r\n                                        ))}\r\n                                    </ListGroup>\r\n                                    )\r\n                                    : <Message variant=\"info\">Your cart is empty. <Link to=\"/\">Start shopping</Link></Message>\r\n                }\r\n            </Col>\r\n\r\n            <Col xs={8} md={4}>\r\n            <Card>\r\n                    <ListGroup variant='flush'>\r\n                        <ListGroup.Item>\r\n                            <h3>Total ({cartItems.reduce((acc, item) => acc + item.qty, 0)}) items</h3>\r\n                            <h4>Amount &#8377;{cartItems.reduce((acc, item) => acc + item.qty * item.price, 0).toFixed(2)}</h4>\r\n                        </ListGroup.Item>\r\n                   \r\n\r\n                    <ListGroup.Item>\r\n                        <Button\r\n                            type='button'\r\n                            className='btn-block'\r\n                            disabled={cartItems.length === 0}\r\n                            onClick={handleCheckout}\r\n                        >\r\n                            Proceed To Checkout\r\n                        </Button>\r\n                    </ListGroup.Item>\r\n\r\n                    </ListGroup>\r\n                </Card>\r\n            </Col>\r\n        </Row>\r\n    )\r\n}\r\n\r\nexport default Cartscreen"]},"metadata":{},"sourceType":"module"}