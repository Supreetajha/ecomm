{"ast":null,"code":"import _slicedToArray from\"C:/Users/supre/Docs/GitHub/ecomm/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import Form from'react-bootstrap/Form';import Button from'react-bootstrap/Button';import{Link}from'react-router-dom';//My components\nimport FormContainer from'../Components/FormContainer';import{getUserDetails,updateUser}from'../Actions/userActions';import Loader from'../Components/Loader';import Message from'../Components/Message';import{USER_UPDATE_RESET}from'../Constants/userConstants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function UserEditscreen(_ref){var match=_ref.match,history=_ref.history;var userId=match.params.id;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isAdmin=_useState6[0],setAdmin=_useState6[1];var dispatch=useDispatch();var userDetails=useSelector(function(state){return state.userDetails;});var loading=userDetails.loading,error=userDetails.error,user=userDetails.user;var userUpdate=useSelector(function(state){return state.userUpdate;});var loadingUpdate=userUpdate.loading,errorUpdate=userUpdate.error,successUpdate=userUpdate.success;useEffect(function(){if(successUpdate){dispatch({type:USER_UPDATE_RESET});history.push('/admin/userlist');}if(!user._id||user._id!==Number(userId)){dispatch(getUserDetails(userId));}else{if(user.name!==name){setName(user.name);setEmail(user.email);setAdmin(user.isAdmin);}}},[dispatch,userId,user,successUpdate,history,name]);var handleEdit=function handleEdit(e){e.preventDefault();dispatch(updateUser({_id:user._id,name:name,email:email,isAdmin:isAdmin}));};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Link,{to:\"/admin/userlist\",children:\"Go Back\"}),loadingUpdate&&/*#__PURE__*/_jsx(Loader,{}),errorUpdate&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorUpdate}),loading&&/*#__PURE__*/_jsx(Loader,{}),error&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}),/*#__PURE__*/_jsx(FormContainer,{children:/*#__PURE__*/_jsxs(Form,{onSubmit:handleEdit,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Edit User\"}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"Name\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"UserName\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Enter your name\",value:name,onChange:function onChange(e){return setName(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"formBasicEmail\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email address\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",placeholder:\"Enter email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}}),/*#__PURE__*/_jsx(Form.Text,{className:\"text-muted\",children:\"Please enter a valid email id\"})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"isadmin\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Is Admin\"}),/*#__PURE__*/_jsx(Form.Check,{type:\"checkbox\",label:\"IsAdmin\",checked:isAdmin,onChange:function onChange(e){return setAdmin(e.target.checked);}})]}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",onClick:handleEdit,children:\"Update\"})]})})]});}export default UserEditscreen;","map":{"version":3,"sources":["C:/Users/supre/Docs/GitHub/ecomm/src/Screens/UserEditscreen.js"],"names":["useState","useEffect","useDispatch","useSelector","Form","Button","Link","FormContainer","getUserDetails","updateUser","Loader","Message","USER_UPDATE_RESET","UserEditscreen","match","history","userId","params","id","name","setName","email","setEmail","isAdmin","setAdmin","dispatch","userDetails","state","loading","error","user","userUpdate","loadingUpdate","errorUpdate","successUpdate","success","type","push","_id","Number","handleEdit","e","preventDefault","target","value","checked"],"mappings":"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","sourcesContent":["import {useState,useEffect} from 'react'\r\nimport {useDispatch,useSelector} from 'react-redux'\r\nimport Form from 'react-bootstrap/Form'\r\nimport Button from 'react-bootstrap/Button'\r\nimport {Link} from 'react-router-dom'\r\n\r\n//My components\r\nimport FormContainer from '../Components/FormContainer'\r\nimport {getUserDetails,updateUser} from '../Actions/userActions'\r\n\r\nimport Loader from '../Components/Loader'\r\nimport Message from '../Components/Message'\r\nimport { USER_UPDATE_RESET } from '../Constants/userConstants'\r\n\r\nfunction UserEditscreen({match,history}) {\r\n\r\n    const userId = match.params.id\r\n\r\n    const [name,setName] = useState('')\r\n    const [email,setEmail] = useState('')\r\n    const [isAdmin,setAdmin] = useState(false)\r\n\r\n\r\n    const dispatch = useDispatch()\r\n    \r\n    const userDetails = useSelector(state=>state.userDetails)\r\n    const {loading,error,user} = userDetails\r\n\r\n    const userUpdate = useSelector(state=>state.userUpdate)\r\n    const {loading:loadingUpdate,error:errorUpdate,success:successUpdate} = userUpdate\r\n\r\n    useEffect(()=>{\r\n        if (successUpdate) {\r\n            dispatch({type: USER_UPDATE_RESET})\r\n            history.push('/admin/userlist')\r\n        }\r\n        if(!user._id || user._id!== Number(userId)){\r\n            dispatch(getUserDetails(userId))\r\n        } else{\r\n            if(user.name !== name) {\r\n                setName(user.name)\r\n                setEmail(user.email)\r\n                setAdmin(user.isAdmin)\r\n            }\r\n        }\r\n\r\n    },[dispatch,userId,user,successUpdate,history,name])\r\n\r\n    const handleEdit = (e) => {\r\n        e.preventDefault()\r\n        dispatch(updateUser({_id:user._id,name,email,isAdmin}))\r\n    }\r\n    return(\r\n        <div>\r\n            <Link to=\"/admin/userlist\">\r\n             Go Back\r\n            </Link>\r\n            {loadingUpdate && <Loader />}\r\n            {errorUpdate && <Message variant=\"danger\">{errorUpdate}</Message>}\r\n\r\n            {loading && <Loader />} \r\n            {error && <Message variant=\"danger\">{error}</Message>}   \r\n\r\n            <FormContainer>\r\n            \r\n            <Form onSubmit = {handleEdit}>\r\n                <h2>Edit User</h2>  \r\n                <Form.Group className=\"mb-3\" controlId=\"Name\">\r\n                    <Form.Label>UserName</Form.Label>\r\n                    <Form.Control \r\n                    type=\"text\" \r\n                    placeholder=\"Enter your name\"\r\n                    value = {name}\r\n                    onChange = {(e) => setName(e.target.value)} \r\n                   />\r\n                </Form.Group>\r\n\r\n                <Form.Group className=\"mb-3\" controlId=\"formBasicEmail\">\r\n                    <Form.Label>Email address</Form.Label>\r\n                    <Form.Control \r\n                    type=\"email\" \r\n                    placeholder=\"Enter email\"\r\n                    value = {email}\r\n                    onChange = {(e) => setEmail(e.target.value)}\r\n                    />\r\n                    <Form.Text className=\"text-muted\">\r\n                        Please enter a valid email id \r\n                    </Form.Text>\r\n                </Form.Group>\r\n\r\n                <Form.Group className=\"mb-3\" controlId=\"isadmin\">\r\n                    <Form.Label>Is Admin</Form.Label>\r\n                    <Form.Check \r\n                    type=\"checkbox\" \r\n                    label=\"IsAdmin\"\r\n                    checked = {isAdmin}\r\n                    onChange = {(e) => setAdmin(e.target.checked)}  \r\n                   />\r\n                </Form.Group>\r\n\r\n                <Button variant=\"primary\" \r\n                type=\"submit\" \r\n                onClick= {handleEdit}>\r\n                    Update\r\n                </Button>\r\n            </Form>\r\n            </FormContainer>\r\n       \r\n        </div>\r\n      )\r\n}\r\n\r\nexport default UserEditscreen"]},"metadata":{},"sourceType":"module"}